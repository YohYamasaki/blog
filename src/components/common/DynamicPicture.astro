---
import { type HTMLAttributes } from "astro/types";
import { Picture } from "astro:assets";
import { ALL_IMAGES } from "../../utils/constants";

type Props = {
  src: string;
  alt: string;
} & HTMLAttributes<"picture">;

const { src, alt, ...rest } = Astro.props;

if (!ALL_IMAGES[src]) {
  throw new Error(
    `"${src}" does not exist in glob: "src/assets/**/*.{jpeg,jpg,png,gif}"`
  );
}

const image = ALL_IMAGES[src]();
---

<Picture src={image} formats={["avif", "webp"]} {alt} {...rest} />
